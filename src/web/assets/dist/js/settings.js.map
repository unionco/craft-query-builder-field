{"version":3,"file":"settings.js","sources":["../../../../../buildchain/src/vue/components/Field.vue","../../../../../buildchain/src/vue/components/Dropdown.vue","../../../../../buildchain/src/vue/components/Settings.vue","../../../../../buildchain/src/js/settings.ts"],"sourcesContent":["<template>\n  <div :id=\"id('parent')\" :class=\"classname\">\n    <div class=\"heading\">\n      <label :id=\"id('label')\" :for=\"id('input')\">{{label}}</label>\n    </div>\n    <div :id=\"id('instructions')\">\n      <p v-if=\"hasInstructions\">{instructions}</p>\n    </div>\n    <div class=\"input ltr\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, toRef, toRefs } from 'vue';\n\nexport default defineComponent({\n  props: {\n    instructions: {\n      type: String,\n      required: false,\n    },\n    name: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props, { attrs, slots, emit }) {\n    console.log('Field::setup', toRefs(props), { attrs, slots, emit })\n    const name = toRef(props, 'name');\n    const instructions = toRef(props, 'instructions');\n\n    return {\n      name,\n      instructions,\n    };\n  },\n  methods: {\n    id(selector: string) {\n      const nameProp = this.name;\n      if (!nameProp) {\n        throw new Error('[Field] name.value is empty');\n      }\n      switch (selector) {\n        case 'parent':\n          return (nameProp) + '-field';\n        case 'label':\n          return (nameProp) + '-label';\n        case 'input':\n          return (nameProp);\n        case 'instructions':\n          return (nameProp) + '-instructions';\n        default:\n          return 'na';\n      }\n    }\n  }\n})\n</script>\n","<template>\n  <div class=\"select\">\n    <select\n      v-if=\"options\"\n      :id=\"id('input')\"\n      :name=\"name\"\n      :aria-describedby=\"id('instructions')\"\n    >\n      <option\n        v-for=\"option in options\"\n        :value=\"option.id\"\n        :key=\"option.handle\"\n      >\n        {{option.name}}\n      </option>\n    </select>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, toRef } from 'vue';\n\nexport default defineComponent({\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    options: {\n      type: Array,\n      required: true,\n    }\n  },\n  setup(props) {\n    const name = toRef(props, 'name');\n    const options = toRef(props, 'options');\n    console.log('[Dropdown]::setup', options.value);\n    return {\n      name,\n      options,\n    };\n  },\n  methods: {\n    id(selector: string) {\n      const nameProp = this.name;\n      if (!nameProp) {\n        throw new Error('[Dropdown]name.value is empty');\n      }\n      switch (selector) {\n        case 'input':\n          return nameProp;\n        case 'instructions':\n          return nameProp + '-instructions';\n      }\n    },\n  },\n});\n</script>\n","<template>\n  <div>\n    This is Settings {{ JSON.stringify(categoryGoups)}}\n    <Field name=\"category-groups\" instructions=\"Instructions text\">\n      <Dropdown name=\"category-groups\" :options=\"categoryGroups\"/>\n    </Field>\n    <ul>\n      <li :key=\"group.handle\" v-for=\"group in categoryGroups\">\n        {{ group.name }}\n      </li>\n    </ul>\n    <ul>\n      <li :key=\"channel.handle\" v-for=\"channel in channels\">\n        {{ channel.name }}\n      </li>\n    </ul>\n     <ul>\n      <li :key=\"structure.handle\" v-for=\"structure in structures\">\n        {{ structure.name }}\n      </li>\n    </ul>\n    <!-- {{ $props}} -->\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, toRefs } from 'vue';\nimport Field from './Field.vue';\nimport Dropdown from './Dropdown.vue';\n\nexport interface Element {\n  id: string;\n  handle: string;\n  name: string;\n}\n\nexport interface SettingsProps {\n  categoryGroups?: Element[];\n}\n\n// function Settings(props, context) {\n\n// }\n\nexport default defineComponent({\n  // props: {\n  //   categoryGroups: {\n  //     type: Array,\n  //     required: true,\n  //   }\n  // },\n  // data() {\n  //   return {\n  //     categoryGroups:\n  //   };\n  // },\n  components: {\n    Field,\n    Dropdown,\n  },\n  setup(props, context) {\n    const root = document.querySelector('[data-querybuilder-settings]');\n    const categoryGroups = JSON.parse(root.dataset.categoryGroups);\n    const channels = JSON.parse(root.dataset.channels);\n    const structures = JSON.parse(root.dataset.structures);\n    // console.log('settings setup', props, context);\n    // const { categoryGroups } = toRefs(props);\n    console.log('props: categoryGoups', categoryGroups);\n\n    return {\n      categoryGroups,\n      channels,\n      structures,\n    };\n  },\n  mounted() {\n    console.log('mounted');\n  }\n});\n</script>\n","import Settings from '@/vue/components/Settings.vue';\nimport { createApp } from 'vue';\n\nconst selector = '[data-querybuilder-settings]';\n// App main\nconst main = async () => {\n    console.log('Settings main');\n    // Create our vue instance\n    const app = createApp(Settings);\n    // const categoryGroups = el.data.categoryGroups;\n    // Mount the app\n    const root = app.mount(selector);\n    return root;\n};\n\n\n// Execute async function\nmain().then( (root) => {\n    console.log('async settings?');\n});\n"],"names":["defineComponent","props","instructions","type","String","required","name","[object Object]","attrs","slots","emit","log","toRefs","toRef","methods","selector2","nameProp","this","Error","options","Array","value","components","Field","Dropdown","context","root","document","querySelector","categoryGroups","JSON","parse","dataset","channels","structures","async","createApp","Settings","mount","main","then"],"mappings":"6HAgBA,MAAeA,EAAgB,CAC7BC,MAAO,CACLC,aAAc,CACZC,KAAMC,OACNC,UAAU,GAEZC,KAAM,CACJH,KAAMC,OACNC,UAAU,IAGdE,MAAMN,GAAOO,MAAEA,QAAOC,OAAOC,YACnBC,IAAI,eAAgBC,EAAOX,GAAQ,CAAEO,MAAAA,EAAOC,MAAAA,EAAOC,KAAAA,UAIpD,CACLJ,KAJWO,EAAMZ,EAAO,QAKxBC,aAJmBW,EAAMZ,EAAO,kBAOpCa,QAAS,CACPP,GAAGQ,SACKC,EAAWC,KAAKX,SACjBU,QACG,IAAIE,MAAM,sCAEVH,OACD,gBACKC,EAAY,aACjB,eACKA,EAAY,aACjB,eACKA,MACL,sBACKA,EAAY,8BAEb,6YChCjB,MAAehB,EAAgB,CAC7BC,MAAO,CACLK,KAAM,CACJH,KAAMC,OACNC,UAAU,GAEZc,QAAS,CACPhB,KAAMiB,MACNf,UAAU,IAGdE,MAAMN,SACEK,EAAOO,EAAMZ,EAAO,QACpBkB,EAAUN,EAAMZ,EAAO,0BACrBU,IAAI,oBAAqBQ,EAAQE,OAClC,CACLf,KAAAA,EACAa,QAAAA,IAGJL,QAAS,CACPP,GAAGQ,SACKC,EAAWC,KAAKX,SACjBU,QACG,IAAIE,MAAM,wCAEVH,OACD,eACIC,MACJ,sBACIA,EAAW,uWCP5B,MAAehB,EAAgB,CAY7BsB,WAAY,OACVC,WACAC,GAEFjB,MAAMN,EAAOwB,SACLC,EAAOC,SAASC,cAAc,gCAC9BC,EAAiBC,KAAKC,MAAML,EAAKM,QAAQH,gBACzCI,EAAWH,KAAKC,MAAML,EAAKM,QAAQC,UACnCC,EAAaJ,KAAKC,MAAML,EAAKM,QAAQE,2BAGnCvB,IAAI,uBAAwBkB,GAE7B,CACLA,eAAAA,EACAI,SAAAA,EACAC,WAAAA,IAGJ3B,kBACUI,IAAI,0nBCvEHwB,mBACDxB,IAAI,wBAEAyB,EAAUC,GAGLC,MARJ,iCAcjBC,GAAOC,MAAOd,YACFf,IAAI"}